<div class="d-flex justify-content-center" *ngIf="loading == true">
  <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
  </div>
</div>
<div *ngIf="loading == false">
  <div class="container">
    <div class="row">
      <div class="col-10 col-lg-11">
        <p class="h1 text-center">{{patient.nombre}} {{patient.apellido}}</p>
      </div>
      <div class="col-2 col-lg-1">
        <button type="button" class="btn btn-primary" (click)="goToForm()" >
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" class="bi bi-clipboard2-plus" viewBox="0 0 16 16">
            <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h3Z"/>
            <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-12Z"/>
            <path d="M8.5 6.5a.5.5 0 0 0-1 0V8H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V9H10a.5.5 0 0 0 0-1H8.5V6.5Z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
  <div>
    <p class="h2 padding-top">Consultas</p>
    <div *ngIf="this.consultas.length >= 1; else elseBlock">
      <div class="row">
        <div clas="col-2">
            <p class="h6">Filtrar por fecha</p>
            <div class="row">
            <div class="col-3">
                <input type="date" class="form-control" [(ngModel)]="date1">
            </div>
            <div class="col-3">
                <input type="date" class="form-control" [(ngModel)]="date2">
            </div>
            </div>
        </div>
      </div>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Fecha</th>
            <th scope="col">Peso</th>
            <th scope="col">Altura</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let consulta of consultas| filterByDate: date1 : date2">
            <th scope="row">{{consulta.fecha}}</th>
            <td>{{consulta.peso}}</td>
            <td>{{consulta.altura}}</td>
            <td>
              <button type="button" class="btn btn-primary" (click)="goToForm(consulta._id)">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-template #elseBlock><p class="h5 text-center padding-top">No hay consultas guardadas.</p></ng-template>
  </div>
  <p class="h2 padding-top">Turnos</p>
  <div class="d-flex justify-content-end">
    <button class="btn btn-primary" (click)="goToAppointmentsList(id_patient)">Asignar</button>
  </div>
  <div id="appointments-list-div" class="overflow-auto" *ngIf="appointmentss.length > 0, else elseBlock2">
    <app-appointments-list [appointmentsInput]="appointmentss"></app-appointments-list>
  </div>
  <ng-template #elseBlock2>
  <div class="row">
      <div class="col-9">
        <p class="h5"> No hay turnos asignados</p>
      </div>
  </div>
  </ng-template>
  
  <div class="container padding-top">
      <div class="row">
          <button (click)="goToPatientInfo()" class="btn btn-secondary btn-lg btn-block">Datos personales</button>
      </div>   
      <div class="row padding-top">
        <button (click)="goToMedicalHistory()" class="btn btn-secondary btn-lg btn-block">Historia clinica</button>
    </div> 
  </div>  
</div>